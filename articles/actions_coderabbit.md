---
title: "CodeRabbitï¼ˆai-pr-reviewerï¼‰ã‚’è©¦ã™éš›ã«è©°ã¾ã£ãŸãƒã‚¤ãƒ³ãƒˆ"
emoji: "ğŸ”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [CodeRabbit, GitHub, GitHubActions, ChatGPT, OpenAI]
published: true
---
ä»¥ä¸‹ã®è©±é¡Œã«ãªã£ã¦ã„ãŸCodeRabbitã‚’å®Ÿéš›ã«è§¦ã£ã¦ã¿ã‚ˆã†ã¨ã—ã¦è©°ã¾ã£ãŸãƒã‚¤ãƒ³ãƒˆã‚’è¨˜è¼‰ã€‚
https://zenn.dev/minedia/articles/7928ef7545b393

# 1.ã€ŒCodeRabbitã€ã¨ã€Œai-pr-reviewerã€ã¨ã‚’æ··åŒã—ãªã„
[CodeRabbit](https://coderabbit.ai/)ã¯ã€GitHub Appã¨ã—ã¦å‹•ä½œã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã€‚ã€Œâ‰’ CodeRabbitã®Proç‰ˆã€

[ai-pr-reviewer](https://github.com/marketplace/actions/ai-based-pr-reviewer-summarizer-with-chat-capabilities)ã¯ã€CodeRabbitãŒæä¾›ã™ã‚‹GitHub Actionsã€‚ã€Œâ‰’ CodeRabbitã®OSSç‰ˆã€

åŸºæœ¬ã®æ©Ÿèƒ½ã¨ã—ã¦ã¯ã©ã¡ã‚‰ã‚‚åŒã˜ã§ã€PRã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã©ã‚’ã—ã¦ãã‚Œã‚‹ã‚‚ã®ã€‚

ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã®é•ã„ã‚’æ··åŒã—ã¦ã„ãŸãŸã‚ã€å°å…¥æ™‚ã«ã‚„ã‚„è©°ã¾ã£ãŸã€‚
ï¼ˆCodeRabbitã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ymlãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šãŒå¿…è¦ã ã¨å‹æ‰‹ã«æ€ã„è¾¼ã‚“ã§ã„ãŸï¼ˆäºŒé‡è¨­å®šã—ã¦ã—ã¾ã£ã¦ã„ãŸï¼‰ã€ã€ï¼‰

<br>

â€»ai-pr-reviewerã«ã¤ã„ã¦ã¯ã€ã“ã¡ã‚‰ã®è¨˜äº‹ã‚‚ã™ã”ãå‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚
https://zenn.dev/egstock_inc/articles/86c07c9fe3bddf

<br>

## CodeRabbitï¼ˆGitHub Appï¼‰ã¯ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã‚‚è£œåŠ©ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã¯ååˆ†ä½¿ãˆã‚‹
ã›ã£ã‹ããªã®ã§ã€GitHub Appã§ã‚ã‚‹CodeRabbitã‚‚è»½ãç´¹ä»‹ã€‚
[ã€ŒCodeRabbit/Docsã€](https://coderabbit.ai/docs)

åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•ã¯ç°¡å˜ã§ã€Appã¨GitHubã¨ã®é€£æºã‚’æ‰¿èªã—ã¦ã€ä½¿ç”¨ã—ãŸã„ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’é¸æŠã™ã‚‹ã ã‘ã§OKã€‚
Proç‰ˆã®æ–™é‡‘ã¯1ã‚·ãƒ¼ãƒˆã«å¯¾ã—ã¦15ãƒ‰ãƒ«ã€‚

æ–°è¦ç™»éŒ²å¾Œã¯è‡ªå‹•çš„ã«7æ—¥é–“ã®ç„¡æ–™æœŸé–“ãŒå§‹ã¾ã‚‹ã¨ã®è¨˜è¼‰ã‚ã‚Šã€‚
> 1: Sign Up for CodeRabbit
Start your journey with CodeRabbit by registering via your GitHub or GitLab account. With a simple, few-click process, you'll connect CodeRabbit to your account and be ready to go in no time. Each new sign-up automatically starts with a 7-day trial for up to 50 seats, letting your team dive into CodeRabbit's capabilities.

ç„¡æ–™æœŸé–“çµ‚äº†å¾Œã¯ã€è‡ªå‹•çš„ã«ç„¡æ–™ãƒ—ãƒ©ãƒ³ãŒé©ç”¨ã•ã‚Œã‚‹ã€‚
ç„¡æ–™ãƒ—ãƒ©ãƒ³ã ã¨ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ã•ã‚Œãšã«PRã®è¦ç´„ã ã‘å®Ÿè¡Œã•ã‚Œã‚‹ã€‚

**â€» è¦ç´„ã ã‘ã§ã‚‚ååˆ†ä¾¿åˆ©ãªã®ã§ã€ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã‚‚ååˆ†ä½¿ãˆã‚‹ã¨æ€ã†ã€‚**
ã‚€ã—ã‚PRãŒãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆã¾ã¿ã‚Œã«ãªã‚‰ãªãšã«ã‚¹ãƒƒã‚­ãƒªã¨ã—ã¦æ€ã£ãŸã‚ˆã‚Šã„ã„æ„Ÿã˜ã€‚
PRè¦ç´„ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã¯ååˆ†ä½¿ãˆãã†ã€‚ï¼ˆè‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ç›®çš„ã§ã¯ãªããªã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ãŒã€ã€ï¼‰

ä»¥ä¸‹ã€ç„¡æ–™ãƒ—ãƒ©ãƒ³ã®å‡ºåŠ›ä¾‹ã€‚
![](https://storage.googleapis.com/zenn-user-upload/383a01cb77b9-20231019.png)
![](https://storage.googleapis.com/zenn-user-upload/ff44be8fdc56-20231019.png)


<br>

# 2.OpenAI APIã®æ–°è¦ç™»éŒ²ã—ãŸéš›ã«ã€rate limitã®ä¸Šé™å€¤ãŒèª²é‡‘ã—ã¦ã‚‹ã®ã«ä¸ŠãŒã‚‰ãªã„
ã€Œai-pr-reviewerã€ã‚’å‹•ã‹ã™ãŸã‚ã«ã¯ã€OpenAIã®API KeyãŒå¿…è¦ã«ãªã‚‹ã€‚
ä»Šã¾ã§OpenAIã®APIç™»éŒ²ï¼ˆèª²é‡‘ï¼‰ã¯ã—ã¦ã„ãªã‹ã£ãŸã®ã§ã€è¨˜äº‹è¨˜è¼‰ã®é€šã‚Šã«API Keyã‚’å–å¾—ã™ã‚‹ã€‚

ãã®å¾Œã€ymlãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®šã—ã¦ã€Actionsã‚’å®Ÿè¡Œã¾ã§ã¯ã™ã‚“ãªã‚Šã¨ã„ã£ãŸã€‚

**ãŒã€è¨˜äº‹ã«è¨˜è¼‰ã®ã‚ã‚‹ã‚ˆã†ã«ç¶ºéº—ã«ActionsãŒå®Œäº†ã—ãªã„ã€‚**

ã‚¨ãƒ©ãƒ¼ã§å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿å–ã‚Œãšã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã•ã‚Œãªã„ãƒ•ã‚¡ã‚¤ãƒ«ãŒã¡ã‚‰ã»ã‚‰ç™ºç”Ÿã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/babc381f4d52-20231007.png =300x)
*Files not summarized(reviewed) due to errors ãŒç™ºç”Ÿ*

ãƒ­ã‚°ã‚’è¦‹ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªrate limitãŒä¸Šé™ã«é”ã—ã¦ã„ã‚‹ã¨ã®ã‚¨ãƒ©ãƒ¼ãŒä½•å›ã‚‚å‡ºã¦ã„ã‚‹ã€‚
```
response: undefined, failed to send message to openai: Error: OpenAI error 429: {
    "error": {
        "message": "Rate limit reached for 10KTPM-200RPM in organization <org-OrgName> on tokens per min. 
        Limit: 10000 / min. Please try again in 6ms. 
        Contact us through our help center at help.openai.com if you continue to have issues.",
```

<br>

OpenAIã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‹ã‚‰`Rate limits`é …ç›®ã‚’ç¢ºèªã€‚
"ã‚ãªãŸã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä½¿ç”¨ã§ãã‚‹rate limitã®ä¸Šé™ã¯ä»¥ä¸‹"ã ã¨è¨˜è¼‰ãŒã‚ã‚‹ã€‚
![](https://storage.googleapis.com/zenn-user-upload/9f26ceeab488-20231007.png =400x)

ã€Œgpt-4ã®rate limitã¯ã€Œ**10000Tokens / åˆ†**ã€ ãªã®ã‹ãƒ¼ã€‚ã€
ã¨æ€ã„ã¤ã¤ã€ã¤ã„ã§ã«gpt-3.5-turboã®rate limitã‚’ç¢ºèªã™ã‚‹ã¨ã€
ã€Œ**3ãƒªã‚¯ã‚¨ã‚¹ãƒˆ / åˆ†**ã€ï¼Ÿå°‘ãªã™ããªã„ï¼Ÿ

ã“ã“ã§åˆã‚ã¦ä¸Šé™ãŒãŠã‹ã—ãã†ã ã¨æ°—ã¥ãã€è‰²ã€…ã¨èª¿ã¹ã‚‹ã¨ã©ã†ã‚„ã‚‰ã“ã‚Œã¯ç„¡æ–™æ ã®ä¸Šé™å€¤ã‚‰ã—ã„ã€‚

ãªãœã‹èª²é‡‘ã—ã¦é€é‡‘ã•ã‚ŒãŸãƒ¡ãƒ¼ãƒ«ã‚‚é€šçŸ¥ã•ã‚Œã¦ã„ã‚‹ã®ã«ã€rate limitã®ä¸Šé™å€¤ãŒä¸ŠãŒã£ã¦ã„ãªã„ã€‚

<br>

Issueã«ã‚‚åŒæ§˜ã®å•é¡ŒãŒä¸ŠãŒã£ã¦ã„ãŸã€‚
https://community.openai.com/t/regarding-the-issue-of-the-rate-limit-not-being-raised/410184/1

ã¾ãŸã€ä»¥ä¸‹ã®Issueã‚’è¦‹ã‚‹ã¨ã€æœ‰æ–™ã®ä¸Šé™ã«ãªã‚‹ã¾ã§2æ—¥ã‹ã‹ã‚‹ã¨ã®è¨˜è¼‰ãŒã‚ã‚‹ã€‚
ï¼ˆã“ã‚Œã¯ä»–ã®è¨˜äº‹ã§ã‚‚è¦‹ã¤ã‘ãŸãŒã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã©ã“ã«ã“ã®è¨˜è¼‰ãŒã‚ã‚‹ã‹è¦‹ã¤ã‘ã‚‰ã‚Œãªã„ã€‚ã€‚ã€‚TODOï¼šãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®‡æ‰€ã‚’è¦‹ã¤ã‘æ¬¡ç¬¬è¨˜è¼‰ã€‚ï¼‰
https://community.openai.com/t/api-request-limit-increase/409745

<br>

ã¨ã‚Šã‚ãˆãšã¯ã€2æ—¥å¾Œã«ä¸Šé™ãŒä¸ŠãŒã‚‹ã“ã¨ã‚’ä¿¡ã˜ã¦å¾…ã¡ã¤ã¤ã€ä¸€å¿œä¸Šé™å€¤ãŒä¸ŠãŒã‚‰ãªã„ã§ã™ã€‚ã¨ãƒ¡ãƒ¼ãƒ«ã‚’é€ã£ã¦ãŠã„ãŸã€‚

::: message 
TODO: é€²å±•ãŒã‚ã‚Šæ¬¡ç¬¬è¨˜äº‹æ›´æ–°

**10/10 è¿½è¨˜â‘ **
"rate limitã®ä¸Šé™ã‚’å¼•ãä¸Šã’ãŸã„å ´åˆã¯ã€Formã‹ã‚‰ç”³è«‹ã—ã¦ãã ã•ã„ã€‚"çš„ãªå›ç­”ãŒè¿”ã£ã¦ããŸã€‚
â†’ã“ã®rate limitãŒèª²é‡‘å¾Œã§ã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã ã£ãŸã£ã½ã„ï¼Ÿï¼Ÿ
â†’ã¡ã‚‡ã£ã¨è©¦ã—ã§ä½¿ç”¨ã—ãŸã‹ã£ãŸã ã‘ãªã®ã§ã€ä¸Šé™å¼•ãä¸Šã’ã®ç”³è«‹ã¾ã§ã¯ã—ãªã„ï¼ˆæ­£å½“ãªå¿…è¦æ€§ãŒãªã„ã¨ç”³è«‹ã¯èªã‚ãªã„çš„ãªè¨˜è¼‰ãŒã‚ã‚‹ãŸã‚ï¼‰ãŒã€æœ€åˆã‹ã‚‰ã“ã†ã„ã£ãŸä»•æ§˜ãªã®ã‹æœ€è¿‘å¤‰æ›´ã«ãªã£ãŸã®ã‹æ°—ã«ãªã‚‹ã€‚
â†’ã‚‚ã†ã¡ã‚‡ã£ã¨æ·±ãå•ã„åˆã‚ã›ã¦ã¿ã‚‹ã€‚

**10/13 è¿½è¨˜â‘¡**
ã‹ãªã‚Šä¸å¯§ã«å•ã„åˆã‚ã›ãŸã¤ã‚‚ã‚Šã ãŒã€ãƒ†ãƒ³ãƒ—ãƒ¬ã§"rate limitã®ä¸Šé™ã‚’å¼•ãä¸Šã’ãŸã„å ´åˆã¯ã€Formã‹ã‚‰ç”³è«‹ã—ã¦ãã ã•ã„ã€‚"ã¨åŒã˜å†…å®¹ã§å¸°ã£ã¦ããŸã®ã§æ–­å¿µã€‚

**10/19 è¿½è¨˜â‘¢**
ã—ã°ã‚‰ãçµŒã£ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã™ã‚‹ã¨ã€æ–°ãŸã«rate limitã®åˆ¶é™ã«ã¤ã„ã¦æ˜è¨˜ã•ã‚Œã¦ã„ãŸã€‚
ï¼ˆ5ãƒ‰ãƒ«æŒ¯ã‚Šè¾¼ã‚“ã§ãƒãƒ£ãƒ¼ã‚¸ã—ãŸã ã‘ã˜ã‚ƒä¸Šé™å¤‰ã‚ã‚‰ã‹ã£ãŸã®ã§ã€å®Ÿéš›ã«5ãƒ‰ãƒ«ã®apiä½¿ç”¨æ–™ãŒç™ºç”Ÿã—ãŸã‚‰ä¸Šé™ä¸ŠãŒã‚‹ã£ã½ã„ï¼‰
![](https://storage.googleapis.com/zenn-user-upload/fc6e583276e2-20231019.png)


:::

<!--  -->
<!-- è‰²ã€…ã¨èª¿ã¹ã¦ã€ã€‡ã€‡ã™ã‚‹ã“ã¨ã§rate limitã®ä¸Šé™ãŒèª²é‡‘å¾Œã®ä¸Šé™ã§ã‚ã‚‹ä»¥ä¸‹ã«å¢—ãˆã¾ã—ãŸã€‚ -->

<!-- â€»openaiã®apiã®ä»•æ§˜ã‚„rate limitã«ã¤ã„ã¦ã¯åˆ¥è¨˜äº‹ã«ã¾ã¨ã‚ã¾ã—ãŸã€‚ -->

<!-- rate limitãŒæ­£å¸¸ã®å€¤ã«ãªã£ãŸã®ã§ã€å†åº¦actionsã‚’å®Ÿè¡Œã€‚ -->
<!-- ã™ã‚‹ã¨ã€ç„¡äº‹ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå®Œäº†ã—ã¾ã—ãŸã€‚ -->

åˆã‚ã¦OpenAIã®APIã‚’å–å¾—ã™ã‚‹ã€‚ã£ã¦æ–¹ã¯rate limitã®ä¸Šé™å€¤ãŒã—ã£ã‹ã‚Šã¨èª²é‡‘å¾Œã®ä¸Šé™å€¤ã«ãªã£ã¦ã„ã‚‹ã‹ã¯è¦ç¢ºèªã€‚
ãã®è¾ºã®ä»•æ§˜ã‚’çŸ¥ã‚‰ãšã«ã€ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼ãŒActionsã®è¨­å®šã®æ–¹ã«å•é¡ŒãŒã‚ã‚‹ã¨æ€ã£ã¦gpt-4ã®Actionsã‚’å›ã—ã¾ãã‚‹ã¨ã€**ç°¡å˜ã«å¾“é‡èª²é‡‘ãŒé€²ã‚€ã®ã§è¦æ³¨æ„ã€‚**
<!--  -->

<br>

### ãŠã¾ã‘
rate limitãŒç„¡æ–™æ ã®æ™‚ã«ã€`gpt-4`ã ã‹ã‚‰ActionsãŒå®Œäº†ã—ãªã„ã®ã‹ã¨æ€ã„ã€`gpt-3.5-turbo`ã«å¤‰æ›´ã—ã¦å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨ã€
ç„¡æ–™æ ã§ã¯`gpt-3.5-turbo`ã®rate limitã¯ **ã€Œ3ãƒªã‚¯ã‚¨ã‚¹ãƒˆ / åˆ†ã€** ã—ã‹ãªã„ã®ã§ã€Actionså†…ã§ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¾ãã‚Šã€æœ€çµ‚çš„ã«ç©ºãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¿”ã•ã‚Œã¦å®Œäº†ã€‚
ã€€
```
, backtrace: Error: OpenAI error 429: {
"error": {
"message": "Rate limit reached for default-gpt-3.5-turbo in organization <org-OrgName> on requests per min. 
    Limit: 3 / min. Please try again in 20s. 
    Contact us through our help center at help.openai.com if you continue to have issues. 
    Please add a payment method to your account to increase your rate limit. 
    Visit https://platform.openai.com/account/billing to add a payment method.",
"type": "requests",
"param": null,
"code": "rate_limit_exceeded"
}

<...è†¨å¤§ãªä¸Šè¨˜ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ...>

review: nothing obtained from openai
Submitting empty review for PR #Ã—Ã—  // ç©ºãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¿”ã•ã‚Œã¦å®Œäº†
```



<!-- rate limitã¨ã¯ã€ -->

<!-- rate limitã¯è‡ªå‹•çš„ã«çµ„ç¹”ã”ã¨ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ã€‚ -->

<!-- ãŠè©¦ã—æœŸé–“ã®ç„¡æ–™æ ã ã¨ã€ä»¥ä¸‹ã‚‰ã—ã„ã€‚ -->

<!-- æœ‰æ–™ä¼šå“¡ã¨ãªã£ãŸé€é‡‘ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ä¸Šé™ã«ãªã‚‹ã‚‰ã—ã„ã€‚ -->

<!-- ãŸã ã€æœ‰æ–™ä¼šå“¡ã«ãªã£ãŸéš›ã«ã€ä¸Šé™ãŒä¸ŠãŒã‚‰ãšã«ã€ç„¡æ–™æ ã®ã¾ã¾ã§ã‚ã‚‹ã“ã¨ã‚’çŸ¥ã‚‰ãšã«actionsãŒæ„å›³ã—ãŸçµæœã«ãªã‚‰ãšã€ä½•åº¦ã‚‚actionsã‚’å®Ÿè¡Œã—ã¦å‹•ä½œç¢ºèªã—ã¦ã„ãŸï¼ˆä½¿ç”¨é‡ã ã‘ã—ã£ã‹ã‚Šå–ã‚‰ã‚ŒãŸã€‚ã€‚ï¼‰ -->

<!-- ç™ºç”Ÿã—ã¦ã„ãŸã‚¨ãƒ©ãƒ¼ã¯ã€ä»¥ä¸‹ã€‚rate limitãŒä¸Šé™ã«é”ã—ãŸã®ã§å–å¾—ã§ããªã„ã¨è¨€ã£ãŸã‚¨ãƒ©ãƒ¼ã€‚ -->
<!-- ã‚¨ãƒ©ãƒ¼å¾Œã€ä½•åº¦ã‚‚ãƒªãƒˆãƒ©ã‚¤ã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ãã†ã ãŒã€çµæœã¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ãã‚Œãšã«actionsãŒå®Œäº†ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã€‚ -->
