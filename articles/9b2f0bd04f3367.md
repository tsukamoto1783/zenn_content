---
title: "LINE LIFF Ã— Flutter Webï¼šã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã§å‹•ä½œç¢ºèª"
emoji: "ğŸ“‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [flutter, line, liff, fluterweb]
published: true
---

# ã¯ã˜ã‚ã«
LINE LIFF Ã— Flutter Web ã§ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’å–å¾—ã—ã¦ã¿ãŸã€‚
![](/images/9b2f0bd04f3367/sukusyo.jpeg =400x)

# ã—ãŸã“ã¨
- LINE Developersã®ç™»éŒ²âœãƒãƒ£ãƒãƒ«ä½œæˆã—ã¦LIFF IDã®ç”Ÿæˆ [^1]
- web/index.htmlã«LIFF SDKã®è¨˜è¼‰
- flutter_dotenvãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã¦LIFF IDã‚’æœ¬ç•ªç’°å¢ƒã§ä½¿ç”¨ [^2]
- flutter_line_liffãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½¿ç”¨ [^3]

# è©³ç´°
```html:index.html
<head>
  <script src="flutter.js" defer></script>
  <!-- <head>é…ä¸‹ã«ä»¥ä¸‹æŒ¿å…¥ -->
  <script  charset="utf-8"  src="https://static.line-scdn.net/liff/edge/versions/2.20.3/sdk.js"></script>
</head>
```

```dart:main.dart
import 'package:flutter/material.dart';
import 'package:flutter_line_liff/flutter_line_liff.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';

Profile? userInfo;
Future<void> main() async {
  // LIFF IDã‚’å®šç¾©ã—ãŸenvãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
  await dotenv.load(fileName: "env");
  // LIFFåˆæœŸåŒ–å‡¦ç†
  await FlutterLineLiff().init(
    config: Config(liffId: dotenv.env['LIFF_ID'].toString()),
    successCallback: () {
      debugPrint('LIFF init success.');
    },
    errorCallback: (error) {
      debugPrint(
          'LIFF init error: ${error.name}, ${error.message}, ${error.stack}');
    },
  );
  // ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã®å–å¾—
  userInfo = await FlutterLineLiff().profile;
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        appBar: AppBar(
          title: const Text('LINE LIFF sample app'),
        ),
        body: const HomePage(),
      ),
    );
  }
}

class HomePage extends StatelessWidget {
  const HomePage({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {
    if (userInfo == null) {
      return const Center(
        child: Text("decodedIDToken: null"),
      );
    } else {
      return Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã®è¡¨ç¤º
            const Text("Profile Picture"),
            Image.network(userInfo!.pictureUrl.toString()),
            Text("User Name: ${userInfo!.displayName}"),
            Text("User ID: ${userInfo!.userId}"),
            Text("Status Message: ${userInfo!.statusMessage}"),
          ],
        ),
      );
    }
  }
}
```


# ãŠã‚ã‚Šã«
- LIFFã¨ã¯ï¼Ÿã©ã‚“ãªã“ã¨ãŒã§ãã‚‹ï¼Ÿã©ã‚“ãªå‹•ãã™ã‚‹ï¼Ÿ
ã¨ã„ã†æ€ã„ã‹ã‚‰ä½œã£ã¦ã¿ãŸã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã€‚
åŸºæœ¬çš„ãªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã¯ç°¡å˜ã«å–å¾—ã§ãã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸâ—

- ä»Šå›ã¯flutter_line_liffãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ãŸãŒã€ã§ããŸã°ã‹ã‚Šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã®ã§ã€å®Ÿéš›ã®é–‹ç™ºã§æ¡ç”¨ã™ã‚‹ã‹ã¯æ‚©ã¾ã—ã„ã€‚(ä½¿ç”¨æ™‚ã®verã¯0.0.3)
ã‚µã‚¯ãƒƒã¨å‹•ã‹ã—ã¦å‹•ä½œç¢ºèªã—ã¦ã¿ãŸã„ã€‚ã£ã¦ã ã‘ãªã‚‰ååˆ†ã€‚
<!-- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½¿ç”¨ã›ãšã«å®Ÿè£…ã™ã‚‹ãªã‚‰jsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦jsã®ã‚³ãƒ¼ãƒ‰ã‚’dartã«å¤‰æ›ã™ã‚‹å¿…è¦ã‚ã‚Šï¼Ÿ -->

- ä»Šå›ã¯getProfile()ã§å–å¾—ã—ãŸãŒã€getDecodedIDToken()ã§ã‚‚åŸºæœ¬çš„ãªãƒ¦ãƒ¼ã‚¶æƒ…å ±ã¯å–å¾—ã§ããŸã€‚
è©³ã—ã„é•ã„ã¯ãƒ¬ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹å‚ç…§ã€‚[LIFF v2 APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://developers.line.biz/ja/reference/liff/#get-profile)

> ***liff.getDecodedIDToken()***
> LIFF SDKãŒå–å¾—ã—ãŸIDãƒˆãƒ¼ã‚¯ãƒ³ã®ã€Œãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã€ã‚’å–å¾—ã—ã¾ã™ã€‚ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡¨ç¤ºåã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã®URLã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãªã©ã®æƒ…å ±ãŒå«ã¾ã‚Œã¾ã™ã€‚
> LIFFã‚¢ãƒ—ãƒªã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡¨ç¤ºåãªã©ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã«ã€ã“ã®APIã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„ã€‚

> ***liff.getProfile()***
> ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚




<!-- â€»ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã§ã¯LINEãƒ­ã‚°ã‚¤ãƒ³ã¯å®Ÿè£…ã—ã¦ã„ãªã„ -->

[^1]: LINE Developersç™»éŒ²æ–¹æ³•ã«ã¤ã„ã¦ã¯æ¤œç´¢ã™ã‚‹ã¨è¨˜äº‹ãŸãã•ã‚“å‡ºã¦ãã‚‹ã®ã§å‰²æ„›
[^2]: flutter_dotenvã«ã¤ã„ã¦ã®å‚è€ƒè¨˜äº‹: [FlutterWebãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«'.env'ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„](https://zenn.dev/tsukatsuka1783/articles/64c9e06d516a3e)
[^3]: [Pub.dev:flutter_line_liff](https://pub.dev/packages/flutter_line_liff)
