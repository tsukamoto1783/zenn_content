---
title: "ã€Flutterã€‘ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãªã©ã§ä½¿ç”¨ã™ã‚‹ã‚³ãƒ¼ãƒãƒãƒ¼ã‚¯å®Ÿè£…"
emoji: "ğŸ”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [flutter ,dart ,tutorial ,tutorialCoachMark]
published: true
---

[tutorial_coach_mark](https://pub.dev/packages/tutorial_coach_mark)ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç”¨ã„ã¦ã€ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãªã©ã§ä½¿ç”¨ã™ã‚‹ã‚³ãƒ¼ãƒãƒãƒ¼ã‚¯ã‚’å®Ÿè£…ã™ã‚‹ã€‚

ã©ã†ã„ã£ãŸã“ã¨ãŒã§ãã‚‹ã®ã‹ã¯[tutorial_coach_mark](https://pub.dev/packages/tutorial_coach_mark)ã®READMEã®å‹•ç”»ã‚’è¦‹ã‚‹ã¨ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã¤ãã‚„ã™ã„ã€‚

<br>

## ã‚³ãƒ¼ãƒãƒãƒ¼ã‚¯ã¨ã¯
ã‚³ãƒ¼ãƒãƒãƒ¼ã‚¯ã¨ã¯ã€ã‚¢ãƒ—ãƒªã®ä½¿ã„æ–¹ã‚’è¦–è¦šçš„ã«æ•™ãˆã‚‹ãƒ’ãƒ³ãƒˆã®ã“ã¨ã€‚
çŸ­ãã€éš›ç«‹ãŸã›ãŸã„æ©Ÿèƒ½ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦å¿…è¦æœ€ä½é™ã®æƒ…å ±ã ã‘ã‚’è¦–è¦šçš„ã«èª¬æ˜ã™ã‚‹æ©Ÿèƒ½ã®ã“ã¨ã€‚
ã‚³ãƒ¼ãƒãƒãƒ¼ã‚¯ãŒã‚ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¢ãƒ—ãƒªã®ç‰¹å®šã®æ©Ÿèƒ½ã®ä½¿ã„æ–¹ã‚’ç°¡å˜ã«ç†è§£ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

å‚è€ƒï¼š[Nielsen Norman Group / Instructional Overlays and Coach Marks for Mobile Apps](https://www.nngroup.com/articles/mobile-instructional-overlay/)

<br>

## ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¨ã‚³ãƒ¼ãƒãƒãƒ¼ã‚¯ã®é•ã„
ã©ã¡ã‚‰ã‚‚ã‚¢ãƒ—ãƒªã®ä½¿ç”¨æ–¹æ³•ã‚’æ•™ãˆã‚‹ã‚ˆã†ãªä¼¼ãŸæ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ãŒã€ä»¥ä¸‹ã®è¦³ç‚¹ã§å°‘ã—é•ã„ãŒã‚ã‚‹ã€‚

**ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼š** ã‚¢ãƒ—ãƒªã®å…¨ä½“çš„ãªä½¿ã„æ–¹ã‚„æµã‚Œã‚’è©³ç´°ã«æ•™ãˆã‚‹ï¼ˆä¼ãˆã‚‹ï¼‰ã‚‚ã®ã€‚å‰²ã¨é•·å°ºã«ãªã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚

**ã‚³ãƒ¼ãƒãƒãƒ¼ã‚¯ï¼š** ç‰¹å®šã®æ©Ÿèƒ½ã«å¯¾ã—ã¦ã€ãã®æ©Ÿèƒ½ã®ä½¿ã„æ–¹ã‚’è¦–è¦šçš„ã«ç«¯çš„ã«æ•™ãˆã‚‹ï¼ˆä¼ãˆã‚‹ï¼‰ã‚‚ã®ã€‚ã‚ˆã‚ŠçŸ­ãç«¯çš„ã«ãŒåŸºæœ¬ã€‚

<br>


## å®Ÿè£…ãƒã‚¤ãƒ³ãƒˆ
ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ä¸Šã§ã€ãƒã‚¤ãƒ³ãƒˆã¨ãªã‚‹classã¯ä»¥ä¸‹ã®ï¼“ã¤ã€‚

:::message
- TutorialCoachMark
- TargetFocus
- TargetContent
:::

ä»¥ä¸‹ã«ãã‚Œãã‚Œã®classã§ä½¿ç”¨ã§ãã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¨˜è¼‰ã™ã‚‹ã€‚

<br>


### TutorialCoachMark
TutorialCoachMarkã¯ã€ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®å…¨ä½“çš„ãªå‹•ä½œã¨è¦‹ãŸç›®ã‚’è¨­å®šã™ã‚‹ã€‚
å„ã‚¹ãƒ†ãƒƒãƒ—ã®ç®¡ç†ã‚„ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šã€ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³ã®å‹•ä½œã€ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã®è¦‹ãŸç›®ãªã©ã€‚

â€»TutorialCoachMarkã«ã¤ã„ã¦ã¯READMEã«è¨˜è¼‰ãŒãªã„ã®ã§ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§è¨˜è¼‰ã®ã‚ã£ãŸã‚‚ã®ã‚’è¨˜è¼‰ã€‚


| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£                   | å‹                                                    | èª¬æ˜                                                                        |
| ---------------------------- | ----------------------------------------------------- | --------------------------------------------------------------------------- |
| targets                      | List<TargetFocus>                                     | å„ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆå„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼‰ã®ä¸­èº«ãƒ»å®šç¾©                                      |
| onClickTarget                | FutureOr<void> Function(TargetFocus)?                 | å„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯                              |
| onClickTargetWithTapPosition | FutureOr<void> Function(TargetFocus, TapDownDetails)? | å„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒç‰¹å®šã®ä½ç½®ã§ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯                  |
| onClickOverlay               | FutureOr<void> Function(TargetFocus)?                 | ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã¸ã®Tapæœ‰åŠ¹æ™‚ã«ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ |
| onFinish                     | Function()?                                           | ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒçµ‚äº†ã—ãŸã¨ãã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯                                  |
| paddingFocus                 | double                                                | ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¨ãƒªã‚¢ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°                                                |
| onSkip                       | Function()?                                           | ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯                            |
| alignSkip                    | AlignmentGeometry                                     | ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³ã®ä½ç½®                                                        |
| textSkip                     | String                                                | ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆ                                                    |
| textStyleSkip                | TextStyle                                             | ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ«                                            |
| hideSkip                     | bool                                                  | ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³ã‚’éš ã™ã‹ã©ã†ã‹                                                |
| colorShadow                  | Color                                                 | ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã®è‰²                                            |
| opacityShadow                | double                                                | ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã®é€æ˜åº¦                                                        |
| focusAnimationDuration       | Duration                                              | ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æœŸé–“                                              |
| unFocusAnimationDuration     | Duration                                              | ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è§£é™¤ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æœŸé–“                                          |
| pulseAnimationDuration       | Duration                                              | ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æœŸé–“                                                  |
| pulseEnable                  | bool                                                  | ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ã©ã†ã‹                                    |
| skipWidget                   | Widget?                                               | ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ                                        |
| showSkipInLastTarget         | bool                                                  | æœ€å¾Œã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ã‹ã©ã†ã‹                          |
| imageFilter                  | ImageFilter?                                          | ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼                                                          |

<br>

| ãƒ¡ã‚½ãƒƒãƒ‰                  | èª¬æ˜                                                                             |
| ------------------------- | -------------------------------------------------------------------------------- |
| show                      | ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’è¡¨ç¤º                                                             |
| showWithNavigatorStateKey | `navigatorKey`ã‚’ä½¿ç”¨ã—ã¦ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’è¡¨ç¤º                                     |
| showWithOverlayState      | `OverlayState`ã‚’ä½¿ç”¨ã—ã¦ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’è¡¨ç¤º                                     |
| finish                    | ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’çµ‚äº†ã—ã¦ã€`onFinish`ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å‘¼ã³å‡ºã—ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’å‰Šé™¤   |
| skip                      | ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ã€`onSkip`ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å‘¼ã³å‡ºã—ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’å‰Šé™¤ |
| isShowing                 | ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒè¡¨ç¤ºä¸­ã‹ã©ã†ã‹ã®åˆ¤å®š                                             |
| next                      | æ¬¡ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã‚€                                                 |
| previous                  | å‰ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚¹ãƒ†ãƒƒãƒ—ã«æˆ»ã‚‹                                                 |

<br>

### TargetFocus
TargetFocusã¯ã€ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¾Œã«è¡¨ç¤ºã•ã‚Œã‚‹å†…å®¹ã‚’è¨­å®šã™ã‚‹ã€‚
  
| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£               | å‹              | èª¬æ˜                                                                                    |
| ------------------------ | --------------- | --------------------------------------------------------------------------------------- |
| identify                 | dynamic         | è­˜åˆ¥ç”¨                                                                                  |
| keyTarget                | GlobalKey       | ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸã„ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®GlobalKey                                                 |
| targetPosition           | TargetPosition  | GlobalKeyã‚’ä½¿ç”¨ã—ãªã„å ´åˆã€ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã™ã‚‹å ´æ‰€ã‚’æ±ºå®šã™ã‚‹ãŸã‚ã«TargetPositionã‚’ä½œæˆã§ãã‚‹ |
| contents                 | ContentTarget[] | ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸå¾Œã«è¡¨ç¤ºã—ãŸã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒªã‚¹ãƒˆ                            |
| shape                    | ShapeLightFocus | Circle or RRectï¼ˆä¸¸ or è§’ä¸¸å››è§’ï¼‰                                                       |
| radius                   | double          | shapeãŒRRectã®å ´åˆã«ä½¿ç”¨                                                                |
| borderSide               | BorderSide      | ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ ã®è¨­å®š                                                                      |
| color                    | Color           | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ©ãƒ¼                                                              |
| enableOverlayTab         | bool            | ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆå…¨ç”»é¢ï¼‰ã‚’ã‚¿ãƒƒãƒ—ã—ã¦æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’å‘¼ã³å‡ºã™ã“ã¨ã‚’æœ‰åŠ¹ã«ã™ã‚‹                |
| enableTargetTab          | bool            | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’å‘¼ã³å‡ºã™ã“ã¨ã‚’æœ‰åŠ¹ã«ã™ã‚‹                          |
| alignSkip                | Alignment       | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå†…ã®ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³ã®ä½ç½®ã‚’æŒ‡å®š                                                |
| paddingFocus             | Alignment       | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå†…ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°è¨­å®š                                                |
| focusAnimationDuration   | Duration        | ãƒ•ã‚©ãƒ¼ã‚«ã‚¹é–‹å§‹æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ™‚é–“ã‚’æŒ‡å®š                                            |
| unFocusAnimationDuration | Duration        | ãƒ•ã‚©ãƒ¼ã‚«ã‚¹çµ‚äº†æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ™‚é–“ã‚’æŒ‡å®š                                            |
| pulseVariation           | Tween           | ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®é–“éš”ã‚’æŒ‡å®š                                                        |

<br>

### TargetContent
ContentTargetã¯ã€TargetFocus{contents:}ã®Listã«è¿½åŠ ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¨­å®šã™ã‚‹ã€‚
ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å½“ã¦ãŸå¾Œã€ä½•ãŒè¡¨ç¤ºã•ã‚Œã€ã©ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‹ã‚’è¨­å®šã™ã‚‹ã€‚
  
| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£     | å‹                          | èª¬æ˜                                                                                         |
| -------------- | --------------------------- | -------------------------------------------------------------------------------------------- |
| align          | AlignContent                | ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«å¯¾ã—ã¦ã€ã©ã®é ˜åŸŸã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤ºã™ã‚‹ã‹ã‚’æŒ‡å®šï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰ |
| padding        | EdgeInsets                  | ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°                                                                       |
| child          | Widget                      | é™çš„ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º                                                                       |
| builder        | Widget                      | å‹•çš„ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º                                                                       |
| customPosition | CustomTargetContentPosition | alignãŒAlignContent.customã®å ´åˆã«ã‚«ã‚¹ã‚¿ãƒ ä½ç½®ã‚’è¿½åŠ                                          |

<br>

## å®Ÿè£…æ™‚ã«è©°ã¾ã£ãŸç‚¹
### alineè¨­å®šã«ã‚ˆã‚‹é ˜åŸŸã®é•ã„
ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«å¯¾ã—ã¦ã€æ€ã„é€šã‚Šã«è¡¨ç¤ºã™ã‚‹ã®ã«å°‘ã—æ‰‹é–“å–ã£ãŸã€‚
ãã‚Œãã‚Œã®éšå±¤ã§alineã‚’é©åˆ‡ã«æŒ‡å®šã—ã¦ã‚ã’ã‚‹å¿…è¦ã‚ã‚Šã€‚

```dart: ç¢ºèªç”¨
    List<TargetFocus> targets = [];

    targets.add(
      TargetFocus(
        keyTarget: keyButton2,
        contents: [
          TargetContent(
            align: ContentAlign.bottom,
            builder: (context, controller) => Stack(
              // alignment: Alignment.topCenter,
              children: [
                Container(
                  color: Colors.red,
                  width: MediaQuery.of(context).size.width,
                  height: MediaQuery.of(context).size.height,
                ),
                Container(
                  color: Colors.blue,
                  width: 50,
                  height: 50,
                ),
              ],
            ),
          ),
        ],
      ),
    );
```

| bottom                                                                               | right                                                                                | left                                                                                 | top                                                                                  |
| ------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------ |
| ![](https://storage.googleapis.com/zenn-user-upload/ac69fa5a4899-20230715.png =150x) | ![](https://storage.googleapis.com/zenn-user-upload/f828b657dc51-20230715.png =150x) | ![](https://storage.googleapis.com/zenn-user-upload/988ab9d9ad24-20230715.png =150x) | ![](https://storage.googleapis.com/zenn-user-upload/5994f99d7384-20230715.png =150x) |

<br>

### é©åˆ‡ãªå†æç”»
setState()ãªã©ã§ã€ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¾Œã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã‚’å†æç”»ã™ã‚‹éš›ã«å°‘ã—è©°ã¾ã£ãŸã€‚
â†’å†æç”»ã•ã›ãŸã„ç¯„å›²ã¨ã€buildã®ç¯„å›²ã¨ã®é–¢ä¿‚æ€§ã‚’ã—ã£ã‹ã‚Šã¨è¦‹ç›´ã™ã“ã¨ã§è§£æ±ºã€‚


| before                                                                               | after                                                                                |
| ------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------ |
| ![](https://storage.googleapis.com/zenn-user-upload/f1ade791a367-20230715.gif =150x) | ![](https://storage.googleapis.com/zenn-user-upload/8c53bc53d8c0-20230715.gif =150x) |

<br>

â€»ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ã€ã‚¤ãƒã‚¤ãƒã„ã‘ã¦ãªã„ã‚³ãƒ¼ãƒ‰ã§ã™ãŒç¢ºèªç”¨ã®ãŸã‚ã”æ„›å¬Œã€‚riverpodç­‰ã§å®Ÿè£…ã™ã‚‹ã¨ã‚ˆã‚Šã™ã£ãã‚Šæ›¸ã‘ã‚‹ã‹ã¨ã€‚

::::details before
```dart
import 'dart:ui';

import 'package:flutter/material.dart';
import 'package:tutorial_coach_mark/tutorial_coach_mark.dart';

void main() => runApp(const MyApp());

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'TutorialCoachMark Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: const MyHomePage(),
    );
  }
}

class MyHomePage extends StatefulWidget {
  const MyHomePage({Key? key}) : super(key: key);

  @override
  MyHomePageState createState() => MyHomePageState();
}

class MyHomePageState extends State<MyHomePage> {
  late TutorialCoachMark tutorialCoachMark;

  // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹å€¤
  bool isShow = false;
  GlobalKey key = GlobalKey();

  @override
  void initState() {
    createTutorial();
    Future.delayed(Duration.zero, showTutorial);
    super.initState();
  }

// ============================================================
// setState()ã«ã‚ˆã£ã¦ã€buildä»¥ä¸‹ãŒå†æç”»ã•ã‚Œã‚‹
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(),
      body: Container(
        color: isShow == false ? Colors.white : Colors.grey,
        child: Center(
          child: Container(
            key: key,
            color: Colors.blue,
            width: 50,
            height: 50,
          ),
        ),
      ),
    );
  }
// ============================================================

  void showTutorial() {
    tutorialCoachMark.show(context: context);
  }

  void createTutorial() {
    tutorialCoachMark = TutorialCoachMark(
      targets: _createTargets(),
      textSkip: "",
      paddingFocus: 10,
      opacityShadow: 0.5,
      imageFilter: ImageFilter.blur(sigmaX: 8, sigmaY: 8),
    );
  }

  List<TargetFocus> _createTargets() {
    List<TargetFocus> targets = [];

    targets.add(
      TargetFocus(
        keyTarget: key,
        contents: [
          TargetContent(
            align: ContentAlign.bottom,
// ============================================================
// initState()å†…ã®createTutorial()ã§å®šç¾©ã•ã‚Œã‚‹CheckBoxã¯ã€buildé…ä¸‹ã§ã¯ç„¡ã„ãŸã‚ã€isShowãŒå¤‰æ›´ã•ã‚Œã¦ã‚‚å†æç”»ã•ã‚Œãªã„ã€‚
// èƒŒæ™¯è‰²ã®Container()ã¯buildé…ä¸‹ãªã®ã§ã€isShowãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨å†æç”»ã•ã‚Œã‚‹ã€‚
            builder: (context, controller) => Padding(
              padding: const EdgeInsets.only(top: 40.0),
              child: Transform.scale(
                scale: 2,
                child: Checkbox(
                  value: isShow,
                  onChanged: (value) {
                    setState(
                      () {
                        isShow = !isShow;
                      },
                    );
                  },
                ),
              ),
            ),
// ============================================================
          ),
        ],
      ),
    );

    return targets;
  }
}

```
::::


::::details after
```dart
import 'dart:ui';

import 'package:flutter/material.dart';
import 'package:tutorial_coach_mark/tutorial_coach_mark.dart';

void main() => runApp(const MyApp());

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'TutorialCoachMark Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: const MyHomePage(),
    );
  }
}

class MyHomePage extends StatefulWidget {
  const MyHomePage({Key? key}) : super(key: key);

  @override
  MyHomePageState createState() => MyHomePageState();
}

class MyHomePageState extends State<MyHomePage> {
  late TutorialCoachMark tutorialCoachMark;

// ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹å€¤
  bool isShow = false;
  GlobalKey key = GlobalKey();

  @override
  void initState() {
    createTutorial();
    Future.delayed(Duration.zero, showTutorial);
    super.initState();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(),
      body: Container(
        color: isShow == false ? Colors.white : Colors.grey,
        child: Center(
          child: Container(
            key: key,
            color: Colors.blue,
            width: 50,
            height: 50,
          ),
        ),
      ),
    );
  }

  void showTutorial() {
    tutorialCoachMark.show(context: context);
  }

  void createTutorial() {
    tutorialCoachMark = TutorialCoachMark(
      targets: _createTargets(),
      textSkip: "",
      paddingFocus: 10,
      opacityShadow: 0.5,
      imageFilter: ImageFilter.blur(sigmaX: 8, sigmaY: 8),
    );
  }

  List<TargetFocus> _createTargets() {
    List<TargetFocus> targets = [];

    targets.add(
      TargetFocus(
        keyTarget: key,
        contents: [
          TargetContent(
            align: ContentAlign.bottom,
// ============================================================
// èƒŒæ™¯è‰²ã®Container()ãŒbuildé…ä¸‹ãªã®ã§ã€isShowãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨å†æç”»ã•ã‚Œã‚‹ã€‚
            builder: (context, controller) {
              return CustomCheckBox(
                (value) {
                  setState(() {
                    isShow = !isShow;
                  });
                },
              );
// ============================================================

            },
          ),
        ],
      ),
    );

    return targets;
  }
}

class CustomCheckBox extends StatefulWidget {
  const CustomCheckBox(this.onCheckedChanged, {super.key});

  final void Function(void) onCheckedChanged;

  @override
  CustomCheckBoxState createState() => CustomCheckBoxState();
}

class CustomCheckBoxState extends State<CustomCheckBox> {
  bool _isShow = false;

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.only(top: 40.0),
      child: Transform.scale(
        scale: 2,
// ============================================================
// Container()ã¨ã¯åˆ¥ç‰©ã¨ã—ã¦ã€Checkbox()ã ã‘ã®ãŸã‚ã«çŠ¶æ…‹ã‚’ç›£è¦–ã€‚
        child: Checkbox(
          value: _isShow,
          onChanged: (value) {
            widget.onCheckedChanged(value);
            setState(
              () {
                _isShow = !_isShow;
              },
            );
          },
        ),
// ============================================================
      ),
    );
  }
}
```
::::