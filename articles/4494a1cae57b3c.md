---
title: "auto_route"
emoji: "ğŸ›£ï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Flutter,Dart,auto_route]
published: false
---

auto_routeãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¤ã„ã¦ã€ã‚ã¾ã‚Šè¨˜äº‹ãŒãªã‹ã£ãŸã®ã§ã€åŸºæœ¬çš„ãªå‹•ä½œã‚’ç°¡å˜ã«ã¾ã¨ã‚ã¦ã¿ãŸã€‚

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ²¿ã£ã¦ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã¦ã„ãã€‚
https://pub.dev/packages/auto_route



â€»auto_route: 5ç³»ã¨6ç³»ã ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è¨˜è¼‰ãŒé•ã†ã®ã§æ³¨æ„ã€‚ã‚ˆãè¨˜äº‹ã§è¦‹ã‹ã‘ã‚‹ã®ã¯ã€5ç³»ã®è¨˜è¼‰ãŒå¤šã„ã§ã™ã€‚ã€‚

<!-- # auto_routeã®ãƒ¡ãƒªãƒƒãƒˆ -->
<!-- ãã‚‚ãã‚‚ã€auto_routeã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆã¯ï¼Ÿ -->



# ã¾ãšã¯ç°¡å˜ãªã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚’ä½œæˆ
å‹•ä½œç¢ºèªç”¨ã«ã€ãƒœã‚¿ãƒ³ã‚’2ç”»é¢è¡¨ç¤ºã™ã‚‹ã ã‘ã®ç°¡å˜ãªã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã€‚

::::details flutter doctor
```
[âœ“] Flutter (Channel stable, 3.7.10, on macOS 13.2.1 22D68 darwin-arm64, locale ja-JP)
[âœ“] Android toolchain - develop for Android devices (Android SDK version 33.0.2)
[âœ“] Xcode - develop for iOS and macOS (Xcode 14.2)
[âœ“] Chrome - develop for the web
[âœ“] Android Studio (version 2022.1)
[âœ“] VS Code (version 1.77.2)
[âœ“] Connected device (3 available)
[âœ“] HTTP Host Availability
```
::::

::::details ã‚¢ãƒ—ãƒªã‚³ãƒ¼ãƒ‰
```dart main.dart
void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(primarySwatch: Colors.blue),
      home: const HomePage(),
    );
  }
}
```

```dart home_page.dart
class HomePage extends StatelessWidget {
  const HomePage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Home Page'),
      ),
      body: Center(
        child: ElevatedButton(
          child: const Text('Setting Page'),
          onPressed: () => Navigator.push(
            context,
            MaterialPageRoute(builder: (context) => const SettingPage()),
          ),
        ),
      ),
    );
  }
}

```

```dart setting_page.dart
class SettingPage extends StatelessWidget {
  const SettingPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Setting Page'),
      ),
      body: Center(
        child: ElevatedButton(
          child: const Text('Home Pageã¸æˆ»ã‚‹'),
          onPressed: () => Navigator.pop(context),
        ),
      ),
    );
  }
}
```

::::

# åŸºç¤ç·¨
# Installation
pubspec.yamlã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ã€‚
```yaml :pubspec.yaml
dependencies:                    
  auto_route: [latest-version]                    
                    
dev_dependencies:                    
  auto_route_generator: [latest-version]                    
  build_runner: [latest-version]
```

# Using part builder
ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã€‚
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å€£ã£ã¦ã€AppRouterã‚¯ãƒ©ã‚¹ã¨ã™ã‚‹ã€‚
freezedãªã©ã‚’è‡ªå‹•ç”Ÿæˆè¨­å®šã™ã‚‹æ™‚ã¨åŸºæœ¬çš„ã«ã¯åŒã˜æ§‹é€ ã€‚

â€»ã“ã“ãŒãƒãƒ¼ã‚¸ãƒ§ãƒ³5ç³»ã¨6ç³»ã¨ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è¨˜è¼‰ãŒé•ã†ã®ã§æ³¨æ„ã€‚

:::message
@AutoRouterConfigã«ã€replaceInRouteNameã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ã‚¸ã‚§ãƒãƒ¬ãƒ¼ãƒˆæ™‚ã«æ–‡å­—åˆ—ã‚’å¤‰æ›ã—ã¦ãã‚Œã‚‹ã€‚
ex) HomePage -> HomeRoute

::::details è©³ç´°ã¯ä»¥ä¸‹å‚ç…§

```dart
class AutoRouterConfig {
/// Auto generated route names can be a bit long with
/// the [Route] suffix
/// e.g ProductDetailsPage would be ProductDetailsPageRoute
///
/// You can replace some relative parts in your route names
/// by providing a replacement in the follow pattern
/// [whatToReplace,replacement]
/// what to replace and the replacement should be
/// separated with a comma [,]
/// e.g 'Page,Route'
/// so ProductDetailsPage would be ProductDetailsRoute
///
/// defaults to 'Page|Screen,Route', ignored if a route name is provided.
final String? replaceInRouteName;

/// Use for web for lazy loading other routes
/// more info https://dart.dev/guides/language/language-tour#deferred-loading
/// defaults to false
final bool deferredLoading;

/// Only generated files exist in provided directories will be processed
/// defaults = const ['lib']
final List<String> generateForDir;
```
::::


```dart :app_router.dart
part 'app_router.gr.dart';            

@AutoRouterConfig(replaceInRouteName: 'Page,Route')      
class AppRouter extends _$AppRouter {      
    
  @override      
  List<AutoRoute> get routes => [      
   /// å¾Œã»ã©build_runnerã§ç”Ÿæˆã—ãŸãƒ«ãƒ¼ãƒˆã‚’è¨˜è¼‰ã™ã‚‹ã€‚
   ]    
 }
```

# Generating Routable pages
å„Pageã®é ­ã«ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹ã€‚

```dart :home_page.dart
@RoutePage()
class HomePage extends StatelessWidget {
```

# Now simply run the generator
build_runnerã‚’å®Ÿè¡Œã™ã‚‹ã€‚
```
flutter packages pub run build_runner build
```

# Add the generated route to your routes list
build_runnerã‚’å®Ÿè¡Œã—ãŸã‚‰ã€ãŠé¦´æŸ“ã¿ã®.gr.dartãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ã®ã§ã€ç”Ÿæˆã•ã‚ŒãŸãƒ«ãƒ¼ãƒˆã‚’ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚¯ãƒ©ã‚¹ã«è¨˜è¼‰ã™ã‚‹ã€‚

**æ³¨æ„**
ã“ã“ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé€šã‚Šã«è¨˜è¼‰ã—ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã§æ³¨æ„ã€‚

```dart :app_router.dart
@AutoRouterConfig(replaceInRouteName: 'Page,Route')      
class AppRouter extends $AppRouter {      
    
  @override      
  List<AutoRoute> get routes => [      
    // ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è¨˜è¼‰ã ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚
    // AutoRoute(HomeRoute.page),

    // ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£
    // initial: ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã®ç”»é¢ã‚’è¨­å®šã—ãªã„ã¨ã€"Can not resolve initial route"ã¨æ€’ã‚‰ã‚Œã‚‹ã€‚
    // page: requiredã®åå‰ä»˜ãã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãªã®ã§ã€page:ã®è¨˜è¼‰ãŒå¿…è¦ã€‚
    AutoRoute(page: HomeRoute.page, initial: true),


    AutoRoute(page: SettingRoute.page),
   ]    
 }
```


# Finalize the setup
build_runnerã§ç”Ÿæˆã•ã‚ŒãŸãƒ«ãƒ¼ã‚¿ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’ã€MaterialAppã«æ¥ç¶šã™ã‚‹ã€‚
```dart
class MyApp extends StatelessWidget {
  MyApp({super.key});

  final _appRouter = AppRouter(); //è¿½åŠ 

  @override
  Widget build(BuildContext context) {
    return MaterialApp.router( // routerã‚’è¿½åŠ 
      routerConfig: _appRouter.config(), // è¿½åŠ 
      title: 'Flutter Demo',
      theme: ThemeData(primarySwatch: Colors.blue),
      // home: const HomePage(), // homeã‚’å‰Šé™¤
    );
  }
}
```

# Navigating Between Screens
ç”»é¢é·ç§»ã®è¨˜è¿°ã‚’ã€auto_routeã®è¨˜è¿°ã«å¤‰æ›´ã™ã‚‹ã€‚

:::message
auto_routeã¯ã€ã‚¸ã‚§ãƒãƒ¬ãƒ¼ãƒˆã•ã‚ŒãŸãƒ«ãƒ¼ãƒˆã¨ã€pathã®ä¸¡æ–¹ã‚’ä½¿ã£ã¦ã€ãƒšãƒ¼ã‚¸ã®ã‚¹ã‚¿ãƒƒã‚¯æ“ä½œã‚’ã™ã‚‹ãŸã‚ã«ã€ä¸€èˆ¬çš„ãªpushã€popãªã©ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æä¾›ã—ã¾ã™ã€‚
:::

```dart :home_page.dart
child: ElevatedButton(
    child: const Text('Setting Page'),
    // onPressed: () => Navigator.push(context,
    //   MaterialPageRoute(builder: (context) => const SettingPage()),),
    
    onPressed: () => context.router.push(const SettingRoute()),
    
    // å¼•æ•°ãŒã‚ã‚‹å ´åˆã¯ã‚·ãƒ³ãƒ—ãƒ«ã«å¼•æ•°ã‚’æ¸¡ã™
    // onPressed: () => context.router.push(const SettingRoute(name: "Hoge")),
),        
```

**â€» pathã®å ´åˆã¯ã€ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚¯ãƒ©ã‚¹ã«ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ã‚ã‚‹ã®ã§æ³¨æ„ã€‚**

```dart
@AutoRouterConfig(replaceInRouteName: 'Page,Route')
class AppRouter extends _$AppRouter {
  @override
  List<AutoRoute> get routes => [
        // çœç•¥
        AutoRoute(page: SettingRoute.page, path: "/setting-pate"),
      ];
}
```


```dart :ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§
// ä»¥ä¸‹ã©ã¡ã‚‰ã®è¨˜è¿°ã§ã‚‚å¯èƒ½
AutoRouter.of(context)
context.router

// ãƒšãƒ¼ã‚¸ã‚¹ã‚¿ãƒƒã‚¯ã«æ–°ã—ã„ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ 
context.router.push(const BooksListRoute())                  
// pathã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ä»¥ä¸‹
context.router.pushNamed('/books')

// ä»¥ä¸‹çœç•¥ã€‚è©³ç´°ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‚ç…§ã€‚
```


# Returning Results
ç”»é¢é·ç§»ã®çµæœã‚’è¿”ã™ã«ã¯2ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚ã‚‹ã€‚
"pop completer"ã‚’ä½¿ã†ã‹ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã®ã¨åŒã˜ã‚ˆã†ã«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã™ã‹ã€‚

**â€» ã“ã“ã¯ä¸€æ—¦çœç•¥ã€‚**

# å¿œç”¨ç·¨
ã“ã“ã¾ã§ã§ã€ã‚ªãƒ¼ã‚½ãƒ‰ãƒƒã‚¯ã‚¹ãªç”»é¢é·ç§»ã¯auto_routeã§å®Ÿè£…ã§ããŸã€‚
ã“ã“ã‹ã‚‰ã¯ã€å°‘ã—ãƒ¬ãƒ™ãƒ«ãŒä¸ŠãŒã£ã¦ä¸­ç´šç·¨ã€‚

# Nested navigation

