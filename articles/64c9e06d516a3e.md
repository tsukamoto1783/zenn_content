---
title: "ã€Flutterã€‘flutter_dotenvï¼šFlutter Webã®ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«'.env'ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„"
emoji: "ğŸ”§"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["flutter","dart","FlutterWeb","dotenv","FirebaseHosting"]
published: true
---

**å‰ææ¡ä»¶**
ãƒ»FirebaseHostingã‚’ç”¨ã„ã¦ãƒ‡ãƒ—ãƒ­ã‚¤
```yaml:è¨˜äº‹ã§ä½¿ç”¨ã™ã‚‹ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ
project(root)
â”œâ”€ .github
â”‚  â””â”€ workflows
â”‚      â””â”€ actions.yaml
â”œâ”€ lib
â”‚  â””â”€ main.dart
â”œâ”€ .env
â”œâ”€ firebase.json
â””â”€ pubspec.yaml
```

# è§£æ±ºæ–¹æ³•
### ã€æ¡ˆâ‘ ã€‘
ç’°å¢ƒå¤‰æ•°ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’â€.envâ€ã‹ã‚‰"env"ã«ã™ã‚‹ã€‚
```diff dart:main.dart
Future<void> main() async {
  // .envãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿
+  await dotenv.load(fileName: "env");
-  await dotenv.load(fileName: ".env");
  runApp(const MyApp());
}
```
```diff yaml:actions.yaml
      # .envãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
      - name: create .env
        run: |
+          touch env
+          echo TEST_KEY=${{secrets.TEST_KEY}} >> env
-          touch .env
-          echo TEST_KEY=${{secrets.TEST_KEY}} >> .env
```
```diff yaml:pubspec.yaml
flutter:
  assets:
+    - env
-    - .env
```

### ã€æ¡ˆâ‘¡ã€‘
firebase.jsonã®ignoreè¨­å®šã‚’ä¿®æ­£ã™ã‚‹ã€‚
```diff yaml:firebase.json
"hosting": {
  "public": "public",  // the only required attribute for Hosting
  "ignore": [
    "firebase.json",
-   "**/.*",
+   "**/.* !**/.env",
    "**/node_modules/**"
  ]
}
```



# è©³ç´°
flutter_dotenvã®Readmeã«ã¯".env"ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨è¨˜è¼‰ãŒã‚ã‚‹ã€‚[^1]
ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã ã¨Readmeã«è¨˜è¼‰é€šã‚Šã€ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«".env"ã‚’ä½œæˆã™ã‚Œã°æ­£å¸¸ã«å‹•ä½œã™ã‚‹ã€‚
```dart:main.dart
Future<void> main() async {
  // .envãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿
  await dotenv.load(fileName: ".env");
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      home: Scaffold(
        appBar: AppBar(
          title: const Text("flutter_dotenv sample app"),
        ),
        body: Center(
          // .envã«è¨­å®šã—ãŸç’°å¢ƒå¤‰æ•°ã®å‘¼ã³å‡ºã—
          child: Text("ã€TEST_KEYã€‘ï¼š${dotenv.env['TEST_KEY']}"),
        ),
      ),
    );
  }
}
```
```env:.env
TEST_KEY = "test_key_hoge"
```
```yaml:pubspec.yaml
flutter:
  assets:
    - .env
```
".env"ã¯githubä¸Šã§ç®¡ç†ã¯ã—ãªã„ã®ã§ã€ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ã¯ä»¥ä¸‹ã®è¨­å®šãŒå¿…è¦ã€‚
- githubä¸Šã§ç’°å¢ƒå¤‰æ•°ã®è¨­å®š[^2]
- actionsã«".env"ä½œæˆã«é–¢ã™ã‚‹å‡¦ç†ã®è¨˜è¼‰

```yaml:actions.yaml
      # .envãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
      - name: create .env
        run: |
          touch .env
          echo TEST_KEY=${{secrets.TEST_KEY}} >> .env
```
&nbsp;
ä¸Šè¨˜ã§å•é¡Œãªããƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã¨æ€ã£ãŸãŒã€ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸWebã‚’é–‹ã„ã¦DevToolsã®Consoleã§ç¢ºèªã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ€’ã‚‰ã‚Œã‚‹ã€‚
è¨­å®šã—ãŸ".env"ãŒä¸Šæ‰‹ãèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ã‚‰ã—ã„ã€‚ã€‚ã€‚

***ã€ŒError while trying to load an asset: Failed to load asset at "assets/.env" (404)ã€***
&nbsp;
&nbsp;
ã©ã†ã‚„ã‚‰ã€Firebase Hostingã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯"."ã‹ã‚‰å§‹ã¾ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ignoreè¨­å®šãªã®ã§ã€èª­ã¿è¾¼ã¾ã‚Œãªã„ã€‚[^3] [^4]
``` yaml:Firebaseãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  "ignore": [
    "firebase.json",      // the Firebase configuration file (the file described on this page)
    "**/.*",              // files with a leading period should be hidden from the system
    "**/node_modules/**"  // contains dependencies used to create your site but not run it
  ]
```

çµæœã€ä¸Šè¨˜ã®***çµè«–***ã«è¨˜è¼‰ã—ãŸã‚ˆã†ã«ã€**â‘ " . "ã‚’å¤–ã™ã‹ã€â‘¡firebase.jsonã«ã¦.envã ã‘ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹**ã€ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã‚‚å•é¡Œãªãç’°å¢ƒå¤‰æ•°ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚
![](/images/64c9e06d516a3e/picture_sukusyo.png)


[^1]: [pub.dev: flutter_dotenv](https://pub.dev/packages/flutter_dotenv)
[^2]: [ã€GitHub Actionsã€‘.envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹](https://zenn.dev/big_tanukiudon/articles/fc1a2ff562ce3d)
[^3]: [[WEB] Add missing instructions regarding filename #28](https://github.com/java-james/flutter_dotenv/issues/28)
[^4]: [Firebaseãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ > Hosting](https://firebase.google.com/docs/hosting/full-config?hl=ja)